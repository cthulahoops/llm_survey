<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <nav>
            <ul>
                
                <li>
                    <a  href="yi-34b-chat.html">
                        01-ai/yi-34b-chat
                    </a>
                </li>
                
                <li>
                    <a  href="yi-6b.html">
                        01-ai/yi-6b
                    </a>
                </li>
                
                <li>
                    <a  href="goliath-120b.html">
                        alpindale/goliath-120b
                    </a>
                </li>
                
                <li>
                    <a  href="claude-1.html">
                        anthropic/claude-1
                    </a>
                </li>
                
                <li>
                    <a  href="claude-1.2.html">
                        anthropic/claude-1.2
                    </a>
                </li>
                
                <li>
                    <a  href="claude-2.html">
                        anthropic/claude-2
                    </a>
                </li>
                
                <li>
                    <a  href="claude-2.0.html">
                        anthropic/claude-2.0
                    </a>
                </li>
                
                <li>
                    <a  href="claude-2.0_beta.html">
                        anthropic/claude-2.0:beta
                    </a>
                </li>
                
                <li>
                    <a  href="claude-2.1.html">
                        anthropic/claude-2.1
                    </a>
                </li>
                
                <li>
                    <a  href="claude-2.1_beta.html">
                        anthropic/claude-2.1:beta
                    </a>
                </li>
                
                <li>
                    <a  href="claude-2_beta.html">
                        anthropic/claude-2:beta
                    </a>
                </li>
                
                <li>
                    <a  href="claude-3-haiku.html">
                        anthropic/claude-3-haiku
                    </a>
                </li>
                
                <li>
                    <a  href="claude-3-haiku_beta.html">
                        anthropic/claude-3-haiku:beta
                    </a>
                </li>
                
                <li>
                    <a  href="claude-3-opus.html">
                        anthropic/claude-3-opus
                    </a>
                </li>
                
                <li>
                    <a  href="claude-3-opus_beta.html">
                        anthropic/claude-3-opus:beta
                    </a>
                </li>
                
                <li>
                    <a  href="claude-3-sonnet.html">
                        anthropic/claude-3-sonnet
                    </a>
                </li>
                
                <li>
                    <a  href="claude-3-sonnet_beta.html">
                        anthropic/claude-3-sonnet:beta
                    </a>
                </li>
                
                <li>
                    <a  href="claude-instant-1.html">
                        anthropic/claude-instant-1
                    </a>
                </li>
                
                <li>
                    <a  href="claude-instant-1.0.html">
                        anthropic/claude-instant-1.0
                    </a>
                </li>
                
                <li>
                    <a  href="claude-instant-1.1.html">
                        anthropic/claude-instant-1.1
                    </a>
                </li>
                
                <li>
                    <a  href="claude-instant-1.2.html">
                        anthropic/claude-instant-1.2
                    </a>
                </li>
                
                <li>
                    <a  href="claude-instant-1_beta.html">
                        anthropic/claude-instant-1:beta
                    </a>
                </li>
                
                <li>
                    <a  href="chronos-hermes-13b.html">
                        austism/chronos-hermes-13b
                    </a>
                </li>
                
                <li>
                    <a  href="codellama-70b-instruct.html">
                        codellama/codellama-70b-instruct
                    </a>
                </li>
                
                <li>
                    <a  href="dolphin-mixtral-8x7b.html">
                        cognitivecomputations/dolphin-mixtral-8x7b
                    </a>
                </li>
                
                <li>
                    <a  href="command.html">
                        cohere/command
                    </a>
                </li>
                
                <li>
                    <a  href="command-r.html">
                        cohere/command-r
                    </a>
                </li>
                
                <li>
                    <a  href="command-r-plus.html">
                        cohere/command-r-plus
                    </a>
                </li>
                
                <li>
                    <a  href="dbrx-instruct.html">
                        databricks/dbrx-instruct
                    </a>
                </li>
                
                <li>
                    <a  href="dbrx-instruct_nitro.html">
                        databricks/dbrx-instruct:nitro
                    </a>
                </li>
                
                <li>
                    <a  href="mixtral-8x22b-instruct-preview.html">
                        fireworks/mixtral-8x22b-instruct-preview
                    </a>
                </li>
                
                <li>
                    <a  href="gemini-pro.html">
                        google/gemini-pro
                    </a>
                </li>
                
                <li>
                    <a  href="gemini-pro-1.5.html">
                        google/gemini-pro-1.5
                    </a>
                </li>
                
                <li>
                    <a  href="gemini-pro-vision.html">
                        google/gemini-pro-vision
                    </a>
                </li>
                
                <li>
                    <a  href="gemma-7b-it_free.html">
                        google/gemma-7b-it:free
                    </a>
                </li>
                
                <li>
                    <a  href="gemma-7b-it_nitro.html">
                        google/gemma-7b-it:nitro
                    </a>
                </li>
                
                <li>
                    <a  href="palm-2-chat-bison.html">
                        google/palm-2-chat-bison
                    </a>
                </li>
                
                <li>
                    <a  href="palm-2-chat-bison-32k.html">
                        google/palm-2-chat-bison-32k
                    </a>
                </li>
                
                <li>
                    <a  href="palm-2-codechat-bison.html">
                        google/palm-2-codechat-bison
                    </a>
                </li>
                
                <li>
                    <a  href="palm-2-codechat-bison-32k.html">
                        google/palm-2-codechat-bison-32k
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-4-1106-preview.html">
                        gpt-4-1106-preview
                    </a>
                </li>
                
                <li>
                    <a  href="mythomax-l2-13b.html">
                        gryphe/mythomax-l2-13b
                    </a>
                </li>
                
                <li>
                    <a  href="mythomax-l2-13b_extended.html">
                        gryphe/mythomax-l2-13b:extended
                    </a>
                </li>
                
                <li>
                    <a  href="mythomax-l2-13b_nitro.html">
                        gryphe/mythomax-l2-13b:nitro
                    </a>
                </li>
                
                <li>
                    <a  href="mythomist-7b_free.html">
                        gryphe/mythomist-7b:free
                    </a>
                </li>
                
                <li>
                    <a  href="zephyr-7b-beta.html">
                        huggingfaceh4/zephyr-7b-beta
                    </a>
                </li>
                
                <li>
                    <a  href="zephyr-7b-beta_free.html">
                        huggingfaceh4/zephyr-7b-beta:free
                    </a>
                </li>
                
                <li>
                    <a  href="zephyr-orpo-141b-a35b.html">
                        huggingfaceh4/zephyr-orpo-141b-a35b
                    </a>
                </li>
                
                <li>
                    <a  href="neural-chat-7b.html">
                        intel/neural-chat-7b
                    </a>
                </li>
                
                <li>
                    <a  href="psyfighter-13b.html">
                        jebcarter/psyfighter-13b
                    </a>
                </li>
                
                <li>
                    <a  href="airoboros-l2-70b.html">
                        jondurbin/airoboros-l2-70b
                    </a>
                </li>
                
                <li>
                    <a  href="bagel-34b.html">
                        jondurbin/bagel-34b
                    </a>
                </li>
                
                <li>
                    <a  href="psyfighter-13b-2.html">
                        koboldai/psyfighter-13b-2
                    </a>
                </li>
                
                <li>
                    <a  href="lzlv-70b-fp16-hf.html">
                        lizpreciatior/lzlv-70b-fp16-hf
                    </a>
                </li>
                
                <li>
                    <a  href="weaver.html">
                        mancer/weaver
                    </a>
                </li>
                
                <li>
                    <a  href="codellama-34b-instruct.html">
                        meta-llama/codellama-34b-instruct
                    </a>
                </li>
                
                <li>
                    <a  href="llama-2-13b-chat.html">
                        meta-llama/llama-2-13b-chat
                    </a>
                </li>
                
                <li>
                    <a  href="llama-2-70b-chat.html">
                        meta-llama/llama-2-70b-chat
                    </a>
                </li>
                
                <li>
                    <a  href="llama-2-70b-chat_nitro.html">
                        meta-llama/llama-2-70b-chat:nitro
                    </a>
                </li>
                
                <li>
                    <a  href="synthia-70b.html">
                        migtissera/synthia-70b
                    </a>
                </li>
                
                <li>
                    <a  href="mistral-7b-instruct_free.html">
                        mistralai/mistral-7b-instruct:free
                    </a>
                </li>
                
                <li>
                    <a  href="mistral-7b-instruct_nitro.html">
                        mistralai/mistral-7b-instruct:nitro
                    </a>
                </li>
                
                <li>
                    <a  href="mistral-large.html">
                        mistralai/mistral-large
                    </a>
                </li>
                
                <li>
                    <a  href="mistral-medium.html">
                        mistralai/mistral-medium
                    </a>
                </li>
                
                <li>
                    <a  href="mistral-small.html">
                        mistralai/mistral-small
                    </a>
                </li>
                
                <li>
                    <a  href="mistral-tiny.html">
                        mistralai/mistral-tiny
                    </a>
                </li>
                
                <li>
                    <a  href="mixtral-8x22b.html">
                        mistralai/mixtral-8x22b
                    </a>
                </li>
                
                <li>
                    <a  href="mixtral-8x7b.html">
                        mistralai/mixtral-8x7b
                    </a>
                </li>
                
                <li>
                    <a  href="mixtral-8x7b-instruct.html">
                        mistralai/mixtral-8x7b-instruct
                    </a>
                </li>
                
                <li>
                    <a  href="mixtral-8x7b-instruct_nitro.html">
                        mistralai/mixtral-8x7b-instruct:nitro
                    </a>
                </li>
                
                <li>
                    <a  href="noromaid-20b.html">
                        neversleep/noromaid-20b
                    </a>
                </li>
                
                <li>
                    <a  href="noromaid-mixtral-8x7b-instruct.html">
                        neversleep/noromaid-mixtral-8x7b-instruct
                    </a>
                </li>
                
                <li>
                    <a  href="nous-capybara-34b.html">
                        nousresearch/nous-capybara-34b
                    </a>
                </li>
                
                <li>
                    <a  href="nous-capybara-7b_free.html">
                        nousresearch/nous-capybara-7b:free
                    </a>
                </li>
                
                <li>
                    <a  href="nous-hermes-2-mistral-7b-dpo.html">
                        nousresearch/nous-hermes-2-mistral-7b-dpo
                    </a>
                </li>
                
                <li>
                    <a  href="nous-hermes-2-mixtral-8x7b-dpo.html">
                        nousresearch/nous-hermes-2-mixtral-8x7b-dpo
                    </a>
                </li>
                
                <li>
                    <a  href="nous-hermes-2-mixtral-8x7b-sft.html">
                        nousresearch/nous-hermes-2-mixtral-8x7b-sft
                    </a>
                </li>
                
                <li>
                    <a  href="nous-hermes-llama2-13b.html">
                        nousresearch/nous-hermes-llama2-13b
                    </a>
                </li>
                
                <li>
                    <a class="current" href="nous-hermes-yi-34b.html">
                        nousresearch/nous-hermes-yi-34b
                    </a>
                </li>
                
                <li>
                    <a  href="mistral-7b-openorca.html">
                        open-orca/mistral-7b-openorca
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-3.5-turbo.html">
                        openai/gpt-3.5-turbo
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-3.5-turbo-0125.html">
                        openai/gpt-3.5-turbo-0125
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-3.5-turbo-0301.html">
                        openai/gpt-3.5-turbo-0301
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-3.5-turbo-0613.html">
                        openai/gpt-3.5-turbo-0613
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-3.5-turbo-1106.html">
                        openai/gpt-3.5-turbo-1106
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-3.5-turbo-16k.html">
                        openai/gpt-3.5-turbo-16k
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-3.5-turbo-instruct.html">
                        openai/gpt-3.5-turbo-instruct
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-4-0314.html">
                        openai/gpt-4-0314
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-4-1106-preview.html">
                        openai/gpt-4-1106-preview
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-4-32k.html">
                        openai/gpt-4-32k
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-4-32k-0314.html">
                        openai/gpt-4-32k-0314
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-4-turbo.html">
                        openai/gpt-4-turbo
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-4-turbo-preview.html">
                        openai/gpt-4-turbo-preview
                    </a>
                </li>
                
                <li>
                    <a  href="gpt-4-vision-preview.html">
                        openai/gpt-4-vision-preview
                    </a>
                </li>
                
                <li>
                    <a  href="openchat-7b_free.html">
                        openchat/openchat-7b:free
                    </a>
                </li>
                
                <li>
                    <a  href="auto.html">
                        openrouter/auto
                    </a>
                </li>
                
                <li>
                    <a  href="cinematika-7b_free.html">
                        openrouter/cinematika-7b:free
                    </a>
                </li>
                
                <li>
                    <a  href="pplx-70b-chat.html">
                        perplexity/pplx-70b-chat
                    </a>
                </li>
                
                <li>
                    <a  href="pplx-70b-online.html">
                        perplexity/pplx-70b-online
                    </a>
                </li>
                
                <li>
                    <a  href="pplx-7b-chat.html">
                        perplexity/pplx-7b-chat
                    </a>
                </li>
                
                <li>
                    <a  href="pplx-7b-online.html">
                        perplexity/pplx-7b-online
                    </a>
                </li>
                
                <li>
                    <a  href="sonar-medium-chat.html">
                        perplexity/sonar-medium-chat
                    </a>
                </li>
                
                <li>
                    <a  href="sonar-medium-online.html">
                        perplexity/sonar-medium-online
                    </a>
                </li>
                
                <li>
                    <a  href="sonar-small-chat.html">
                        perplexity/sonar-small-chat
                    </a>
                </li>
                
                <li>
                    <a  href="sonar-small-online.html">
                        perplexity/sonar-small-online
                    </a>
                </li>
                
                <li>
                    <a  href="phind-codellama-34b.html">
                        phind/phind-codellama-34b
                    </a>
                </li>
                
                <li>
                    <a  href="mythalion-13b.html">
                        pygmalionai/mythalion-13b
                    </a>
                </li>
                
                <li>
                    <a  href="eagle-7b.html">
                        recursal/eagle-7b
                    </a>
                </li>
                
                <li>
                    <a  href="rwkv-5-3b-ai-town.html">
                        recursal/rwkv-5-3b-ai-town
                    </a>
                </li>
                
                <li>
                    <a  href="rwkv-5-world-3b.html">
                        rwkv/rwkv-5-world-3b
                    </a>
                </li>
                
                <li>
                    <a  href="midnight-rose-70b.html">
                        sophosympatheia/midnight-rose-70b
                    </a>
                </li>
                
                <li>
                    <a  href="openhermes-2-mistral-7b.html">
                        teknium/openhermes-2-mistral-7b
                    </a>
                </li>
                
                <li>
                    <a  href="openhermes-2.5-mistral-7b.html">
                        teknium/openhermes-2.5-mistral-7b
                    </a>
                </li>
                
                <li>
                    <a  href="stripedhyena-hessian-7b.html">
                        togethercomputer/stripedhyena-hessian-7b
                    </a>
                </li>
                
                <li>
                    <a  href="stripedhyena-nous-7b.html">
                        togethercomputer/stripedhyena-nous-7b
                    </a>
                </li>
                
                <li>
                    <a  href="remm-slerp-l2-13b_extended.html">
                        undi95/remm-slerp-l2-13b:extended
                    </a>
                </li>
                
                <li>
                    <a  href="toppy-m-7b_free.html">
                        undi95/toppy-m-7b:free
                    </a>
                </li>
                
                <li>
                    <a  href="xwin-lm-70b.html">
                        xwin-lm/xwin-lm-70b
                    </a>
                </li>
                
            </ul>
        </nav>
        <main>
            <p>Model: nousresearch/nous-hermes-yi-34b</p>

            <p>Prompt</p>
            <div class="markdown-body"><p>I need to take this json:</p>
<p>{<br />
  'first_name': 'Jane',<br />
  'last_name': 'Smith',<br />
  'date_of_birth': '03/16/1977',<br />
  orders: [<br />
    {<br />
      'created': '2024-01-25T15:00:04',<br />
      'amount': '100.00'<br />
    }<br />
]}</p>
<p>And generate some dataclasses.</p>
<p>date_of_birth needs to be a date.<br />
created is a datetime.<br />
amount is a decimal.</p>
<p>How would I do this using the marshmallow library in python?</p></div>
            
                <p>Response 1.</p>
                <div class="markdown-body"><p>You can generate dataclasses from JSON data using the marshmallow library. First, you need to define a marshmallow schema for your data. Then, you can use the <code>dataclass_from_schema</code> function from the <code>datasets</code> module to automatically generate dataclasses for your schema.</p>
<p>Here is the code to perform this task:</p>
<pre><code class="language-python">from typing import List
from datetime import datetime
from decimal import Decimal
from marshmallow import Schema, fields, validates
from marshmallow_dataclass import dataclass
from dataclasses import asdict

class PersonSchema(Schema):
    first_name = fields.Str(required=True)
    last_name = fields.Str(required=True)
    date_of_birth = fields.DateTime(dump_only=True)  # only used for validation
    orders = fields.Nested(OrderSchema, many=True)

    @validates(&quot;date_of_birth&quot;)
    def validate_date_of_birth(self, value):
        try:
            dt = datetime.strptime(value, &quot;%m/%d/%Y&quot;)
            self._errors[&quot;date_of_birth&quot;] = {&quot;message&quot;: f&quot;Date of birth must be in format [month/day/year]. Given date is {dt}&quot;}
        except ValueError:
            self._errors[&quot;date_of_birth&quot;] = {&quot;message&quot;: &quot;Required field 'date_of_birth' is a date. Please use the format [month/day/year].&quot;}

class OrderSchema(Schema):
    created = fields.DateTime(dump_only=True)  # only used for validation
    amount = fields.Decimal(as_string=True)

    @validates(&quot;created&quot;)
    def validate_created(self, value):
        try:
            dt = datetime.strptime(value, &quot;%Y-%m-%dT%H:%M:%S&quot;)
            self._errors[&quot;created&quot;] = {&quot;message&quot;: f&quot;Creation date must be in format [year-month-dayThh:mm:ss]. Given date is {dt}&quot;}
        except ValueError:
            self._errors[&quot;created&quot;] = {&quot;message&quot;: &quot;Required field 'created' is a datetime. Please use the format [year-month-dayThh:mm:ss].&quot;}

person = {&quot;first_name&quot;: &quot;Jane&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;date_of_birth&quot;: &quot;03/16/1977&quot;, &quot;orders&quot;: [{&quot;created&quot;: &quot;2024-01-25T15:00:04&quot;, &quot;amount&quot;: &quot;100.00&quot;}]}

person_schema = PersonSchema().load(person)

# Generate dataclasses
from_schemas = {&quot;Person&quot;: PersonSchema, &quot;Order&quot;: OrderSchema}
for name, schema in from_schemas.items():
    dataclass_from_schema(name, schema)

# Convert JSON to dataclasses
class_to_use = from_schemas[&quot;Person&quot;].get_dataclass()
person_dict = asdict(class_to_use(first_name=person.get(&quot;first_name&quot;),
                                  last_name=person.get(&quot;last_name&quot;),
                                  date_of_birth=person.get(&quot;date_of_birth&quot;),
                                  orders=[class_to_use.orders(created=order.get(&quot;created&quot;), amount=Decimal(order.get(&quot;amount&quot;))) for order in person.get(&quot;orders&quot;)]))
# note: str(order.get(&quot;created&quot;)) converts to str, before using DateTime.strptime

print(person_dict)
</code></pre>
<p>This code snippet will generate two dataclasses <code>Person</code> and <code>Order</code>, which can be used to convert JSON data into python dataclasses and vice versa. The <code>Person</code> dataclass will have a <code>date_of_birth</code> attribute of type <code>datetime</code>, and the <code>Order</code> dataclass will have a <code>created</code> attribute of type <code>datetime</code> and an <code>amount</code> attribute of type <code>Decimal</code>.</p>
<p>There are also validation functions implemented in the schema classes <code>PersonSchema</code> and <code>OrderSchema</code> to ensure that the JSON data is correctly formatted for the respective dataclasses.</p></div>
            
                <p>Response 2.</p>
                <div class="markdown-body"><p>To generate dataclasses from a JSON schema using Marshmallow, you can follow these steps:</p>
<ol>
<li>First, install Marshmallow if you haven't already. You can do this by running the following command:</li>
</ol>
<pre><code class="language-bash">pip install marshmallow
</code></pre>
<ol>
<li>Next, create the necessary dataclasses and their accompanying Marshmallow schemas, like this:</li>
</ol>
<pre><code class="language-python">from datetime import datetime
from dateutil.parser import parse
from decimal import Decimal
from marshmallow import fields, Schema, validate

# Person dataclass
class PersonSchema(Schema):
    first_name = fields.String(validate=validate.Length(min=1))
    last_name = fields.String(validate=validate.Length(min=1))
    date_of_birth = fields.Date(data_key='date_of_birth')
    orders = fields.List(fields.Nested('OrderSchema'), required=False)

class Person(object):
    def __init__(self, first_name: str, last_name: str, date_of_birth: datetime.date, orders: list):
        self.first_name = first_name
        self.last_name = last_name
        self.date_of_birth = date_of_birth
        self.orders = orders

PersonSchema.load_preprocessors = [(PersonSchema, add_date_of_birth_preprocessor), (PersonSchema.fields['orders'], PersonSchema.Nested, add_orders_preprocessor)]

# Order dataclass
class OrderSchema(Schema):
    creation_time = fields.DateTime(data_key='created')
    amount = fields.Decimal(data_key='amount')

class Order(object):
    def __init__(self, creation_time: datetime, amount: Decimal):
        self.creation_time = creation_time
        self.amount = amount

OrderSchema.load_preprocessors = [(OrderSchema, add_amount_preprocessor), (OrderSchema.fields['creation_time'], OrderSchema.DateTime, add_creation_time_preprocessor)]

# Helper functions
def add_date_of_birth_preprocessor(data, *args, **kwargs):
    return add_preprocessors(data, fields.Date, ['date='])

def add_amount_preprocessor(data, *args, **kwargs):
    return add_preprocessors(data, fields.Decimal, ['units='])

def add_creation_time_preprocessor(data, *args, **kwargs):
    return add_preprocessors(data, fields.DateTime, ['time='])

# Utility function to add preprocessors
def add_preprocessors(data, converter, aliases=[]):
oganized(data.keys(), aliases)
    for key in data:
        if key in aliases:
            converter(key, data[key].strip()[aliases[key]])

        else:
            converter('')

# Test data
data = {
    'first_name': 'Jane',
    'last_name': 'Smith',
    'date_of_birth': '03/16/1977',
    'orders': [
        {
            'created': '2024-01-25T15:00:04',
            'amount': '100.00'
        }
    ]
}

# Generate person instance
person = PersonSchema().load(data)
</code></pre>
<p>The code above will generate a <code>Person</code> instance with the desired dataclasses and their associated values from the provided JSON schema. Additionally, it'll ensure that the values are properly converted to the correct data types (date, datetime, decimal).</p></div>
            
                <p>Response 3.</p>
                <div class="markdown-body"><p>To generate classes for your JSON data you can use <code>attrs</code> package along with <code>jsonschema</code> package which can infer classes from data, then <code>attrs</code> can be used to add attributes to each class.</p>
<p>Here's how you can use the packages:</p>
<ol>
<li>First, install the necessary packages using pip:</li>
</ol>
<pre><code class="language-shell">pip install attrs jsonschema
</code></pre>
<ol>
<li>Then, define your JSON schema:</li>
</ol>
<pre><code class="language-python">from jsonschema import Draft7Validator, RefResolver, Draft7ValidatorError

json_schema = {
    &quot;type&quot;: &quot;object&quot;,
    &quot;properties&quot;: {
        &quot;first_name&quot;: {&quot;type&quot;: &quot;string&quot;},
        &quot;last_name&quot;: {&quot;type&quot;: &quot;string&quot;},
        &quot;date_of_birth&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;format&quot;: &quot;date&quot;},
        &quot;orders&quot;: {
            &quot;type&quot;: &quot;array&quot;,
            &quot;items&quot;: {
                &quot;type&quot;: &quot;object&quot;,
                &quot;properties&quot;: {
                    &quot;created&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;format&quot;: &quot;date-time&quot;},
                    &quot;amount&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;pattern&quot;: &quot;^\\d+(\\.\\d+)?$&quot;}
                }
            }
        }
    }
}
</code></pre>
<ol>
<li>Next, infer the dataclasses from schema, convert strings to Python types and replace datetime strings with <code>datetime.datetime()</code>:</li>
</ol>
<pre><code class="language-python">import datetime
from jsonschema import Draft7Validator, RefResolver, Draft7ValidatorError
import attr

def infer_types(obj):
    if isinstance(obj, dict):
        return {attr.asdict(k): infer_types(v)
                for k, v in obj.items()
                if not k.startswith('_')}
    elif isinstance(obj, list):
        return [infer_types(v) for v in obj]
    elif isinstance(obj, str):
        return datetime.datetime.strptime(obj, '%Y-%m-%d %H:%M:%S')
    elif isinstance(obj, (int, float, complex)):
        return obj
    else:
        return obj


def infer_python_types_from_schema(schema):
    dataclass_map = {}

    def generate_dataclass(key, value):
        attr_kwargs = {}
        if isinstance(value, dict):
            attr_kwargs['kw_only'] = True
        return SchemaKeyDataclass(key, **value, **attr_kwargs)

    # Define recursive function to loop through the second level of the schema
    def loop_recursive(schema, cls):
        # Loop through properties of the schema
        for property_name, property_schema in schema.get('properties', {}).items():
            # Define prop class
            if property_name not in dataclass_map:
                prop_type = (property_name, property_schema.get('type'))
                prop_class = property.fget if property_schema.get('additionalItems') else property
                dataclass_prop = generate_dataclass(prop_type, {'type': property_schema.get('type')})
                dataclass_prop = prop_class(f&quot;{key}.{property_name}&quot;,
                                            schema=dataclass_prop.schema,
                                            default=dataclass_prop.default,
                                            metadata=dataclass_prop.metadata,
                                            type=prop_type[1], buttack=prop_class, **dataclass_prop.kwargs)

                dataclass_map[property_name] = cls(prop_type, cls=prop_class, **dataclass_prop.kwargs)
                # print(f&quot;Property: {property_name}&quot;)
            else:
                cls = dataclass_map[property_name]

            cls.schema = property(lambda i: cls(schema=i.schema, **infer_types(infer_python_types_from_schema(i))), metadata=i.metadata)
            cls.default = property(lambda i: i.schema(instance))
            # print(f&quot;Property: {cls.__name__}&quot;)

            # Set default value for properties
            base_schema = SchemaKeyDataclass(f&quot;{key}.{property_name}&quot;, **infer_types(infer_python_types_from_schema(property_schema)))
            slots_schema = SchemaKeySlot(property(lambda i: base_schema, **cls.argv), **cls.argv)

            cls = UnionDataclass(
                UnionBaseClass(slots_schema, metadata=i.metadata), [cls], **cls.argv)

        return cls

    def make_base_class(schema):
        if not schema.get('anyOf'):
            import re
            skeme = {'type': schema.get('type')}
            values = schema.get('enum')
            pattern = re.compile(schema.get('pattern'))
            default = schema.get('default')
            return Dataclass(
                default=default,
                enum=values,
                pattern=pattern,
                type=schema.get('type'),
                namespace='',
                **skeme,
            )
        return SchemaKeyDataclass(
            'type', type=str, **skeme
        )

    base_schema = make_base_class(convert_items(schema.get(&quot;type&quot;)))
    dataclass = SchemaKeyDataclass(
        'root',
        schema=base_schema,
        **infer_types(infer_python_types_from_schema(schema)),
    )

    dataclass_map = infer_dataclass_from_schema(dataclass)

    dataclass = loop_recursive(schema, dataclass)
    return dataclass
</code></pre>
<ol>
<li>Finally, you can validate and convert the data using:</li>
</ol>
<p>```python<br />
from metadata.SchemaKeyDataclass import SchemaKeyDataclass<br />
from metadata.UnionDataclass import UnionDataclass<br />
from attributes.AttributeFieldClass import AttributeFieldClass<br />
from attributes.UnionBaseClass import UnionBaseClass<br />
from metadata.JSONinfo import JSONinfo<br />
from metadata import info</p>
<h1>Example JSON data you would like to convert</h1>
<p>data = {<br />
    "first_name": "Jane",<br />
    "last_name": "Smith",<br />
    "date_of_birth": "1977-03-16T15:00:04",<br />
    "orders": [<br />
        {<br />
            "created": "2024-01-25T15:00:04",<br />
            "amount": "100.00"<br />
        }<br />
    ]<br />
}</p>
<h1>Get JSON schema from JSON data</h1>
<p>info = JSONinfo(data)<br />
schema = info.create_schema()</p>
<h1>Get Python dataclass</h1>
<p>class PythonDataclass(SchemaKeyDataclass):<br />
    def <strong>init</strong>(self) -&gt; None:<br />
        super().<strong>init</strong>()</p>
<pre><code>@property
def schema(self):
    return Draft7Validator(schema, resolver).Meta.schema
</code></pre>
<p>jsonclass = PythonDataclass('root', metadata=SchemaKeyDataclass(<br />
    'root', **infer_types(infer_python_types_from_schema(info.schema))<br />
))</p>
<h1>Validate and convert data</h1>
<p>data = jsonclass.default()<br />
for attribute in reversed(tuple(jsonclass.<strong>init</strong>.<strong>code</strong>.co_varnames[:1] +<br />
                                  (key for key in jsonclass.<strong>dict</strong>.keys()<br />
                                   if key.startswith('_')))) + tuple(<br />
                                   param.name<br />
                                   for param in jsonclass.<strong>init</strong>.<strong>code</strong><br />
                                   .co_varnames[1:]):<br />
    if attribute not in jsonclass.<strong>dict</strong> and attribute not in ('<strong>module</strong>',<br />
                                                                 '<strong>dict</strong>') and attribute not in ('<strong>weakref</strong>',):<br />
        info = JSONinfo(data[attribute])<br />
        derive_schema(jsonclass.<strong>dict</strong>[attribute], info)<br />
        data[attribute] = _info.create_schema()</p>
<h1>Final data</h1>
<p>converted_data = PythonDataclass(schema, **data)</p></div>
            
        </main>
    </body>
</html>
<!DOCTYPE html>
<html>
    <head>
        <title>openrouter/perplexity/sonar-small-chat</title>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <nav>
            <ul>
                
                <li><a href="airoboros-l2-70b.html">airoboros-l2-70b</a></li>
                
                <li><a href="auto.html">auto</a></li>
                
                <li><a href="bagel-34b.html">bagel-34b</a></li>
                
                <li><a href="chronos-hermes-13b.html">chronos-hermes-13b</a></li>
                
                <li><a href="cinematika-7b_free.html">cinematika-7b_free</a></li>
                
                <li><a href="claude-1.html">claude-1</a></li>
                
                <li><a href="claude-1.2.html">claude-1.2</a></li>
                
                <li><a href="claude-2.html">claude-2</a></li>
                
                <li><a href="claude-2.0.html">claude-2.0</a></li>
                
                <li><a href="claude-2.0_beta.html">claude-2.0_beta</a></li>
                
                <li><a href="claude-2.1.html">claude-2.1</a></li>
                
                <li><a href="claude-2.1_beta.html">claude-2.1_beta</a></li>
                
                <li><a href="claude-2_beta.html">claude-2_beta</a></li>
                
                <li><a href="claude-3-haiku.html">claude-3-haiku</a></li>
                
                <li><a href="claude-3-haiku_beta.html">claude-3-haiku_beta</a></li>
                
                <li><a href="claude-3-opus.html">claude-3-opus</a></li>
                
                <li><a href="claude-3-opus_beta.html">claude-3-opus_beta</a></li>
                
                <li><a href="claude-3-sonnet.html">claude-3-sonnet</a></li>
                
                <li><a href="claude-3-sonnet_beta.html">claude-3-sonnet_beta</a></li>
                
                <li><a href="claude-instant-1.html">claude-instant-1</a></li>
                
                <li><a href="claude-instant-1.0.html">claude-instant-1.0</a></li>
                
                <li><a href="claude-instant-1.1.html">claude-instant-1.1</a></li>
                
                <li><a href="claude-instant-1.2.html">claude-instant-1.2</a></li>
                
                <li><a href="claude-instant-1_beta.html">claude-instant-1_beta</a></li>
                
                <li><a href="codellama-34b-instruct.html">codellama-34b-instruct</a></li>
                
                <li><a href="codellama-70b-instruct.html">codellama-70b-instruct</a></li>
                
                <li><a href="command.html">command</a></li>
                
                <li><a href="command-r.html">command-r</a></li>
                
                <li><a href="command-r-plus.html">command-r-plus</a></li>
                
                <li><a href="dbrx-instruct.html">dbrx-instruct</a></li>
                
                <li><a href="dbrx-instruct_nitro.html">dbrx-instruct_nitro</a></li>
                
                <li><a href="dolphin-mixtral-8x7b.html">dolphin-mixtral-8x7b</a></li>
                
                <li><a href="eagle-7b.html">eagle-7b</a></li>
                
                <li><a href="gemini-pro.html">gemini-pro</a></li>
                
                <li><a href="gemini-pro-1.5.html">gemini-pro-1.5</a></li>
                
                <li><a href="gemini-pro-vision.html">gemini-pro-vision</a></li>
                
                <li><a href="gemma-7b-it_free.html">gemma-7b-it_free</a></li>
                
                <li><a href="gemma-7b-it_nitro.html">gemma-7b-it_nitro</a></li>
                
                <li><a href="goliath-120b.html">goliath-120b</a></li>
                
                <li><a href="gpt-3.5-turbo.html">gpt-3.5-turbo</a></li>
                
                <li><a href="gpt-3.5-turbo-0125.html">gpt-3.5-turbo-0125</a></li>
                
                <li><a href="gpt-3.5-turbo-0301.html">gpt-3.5-turbo-0301</a></li>
                
                <li><a href="gpt-3.5-turbo-0613.html">gpt-3.5-turbo-0613</a></li>
                
                <li><a href="gpt-3.5-turbo-1106.html">gpt-3.5-turbo-1106</a></li>
                
                <li><a href="gpt-3.5-turbo-16k.html">gpt-3.5-turbo-16k</a></li>
                
                <li><a href="gpt-3.5-turbo-instruct.html">gpt-3.5-turbo-instruct</a></li>
                
                <li><a href="gpt-4-0314.html">gpt-4-0314</a></li>
                
                <li><a href="gpt-4-1106-preview.html">gpt-4-1106-preview</a></li>
                
                <li><a href="gpt-4-1106-preview.html">gpt-4-1106-preview</a></li>
                
                <li><a href="gpt-4-32k.html">gpt-4-32k</a></li>
                
                <li><a href="gpt-4-32k-0314.html">gpt-4-32k-0314</a></li>
                
                <li><a href="gpt-4-turbo.html">gpt-4-turbo</a></li>
                
                <li><a href="gpt-4-turbo-preview.html">gpt-4-turbo-preview</a></li>
                
                <li><a href="gpt-4-vision-preview.html">gpt-4-vision-preview</a></li>
                
                <li><a href="llama-2-13b-chat.html">llama-2-13b-chat</a></li>
                
                <li><a href="llama-2-70b-chat.html">llama-2-70b-chat</a></li>
                
                <li><a href="llama-2-70b-chat_nitro.html">llama-2-70b-chat_nitro</a></li>
                
                <li><a href="lzlv-70b-fp16-hf.html">lzlv-70b-fp16-hf</a></li>
                
                <li><a href="midnight-rose-70b.html">midnight-rose-70b</a></li>
                
                <li><a href="mistral-7b-instruct_free.html">mistral-7b-instruct_free</a></li>
                
                <li><a href="mistral-7b-instruct_nitro.html">mistral-7b-instruct_nitro</a></li>
                
                <li><a href="mistral-7b-openorca.html">mistral-7b-openorca</a></li>
                
                <li><a href="mistral-large.html">mistral-large</a></li>
                
                <li><a href="mistral-medium.html">mistral-medium</a></li>
                
                <li><a href="mistral-small.html">mistral-small</a></li>
                
                <li><a href="mistral-tiny.html">mistral-tiny</a></li>
                
                <li><a href="mixtral-8x22b.html">mixtral-8x22b</a></li>
                
                <li><a href="mixtral-8x22b-instruct-preview.html">mixtral-8x22b-instruct-preview</a></li>
                
                <li><a href="mixtral-8x7b.html">mixtral-8x7b</a></li>
                
                <li><a href="mixtral-8x7b-instruct.html">mixtral-8x7b-instruct</a></li>
                
                <li><a href="mixtral-8x7b-instruct_nitro.html">mixtral-8x7b-instruct_nitro</a></li>
                
                <li><a href="mythalion-13b.html">mythalion-13b</a></li>
                
                <li><a href="mythomax-l2-13b.html">mythomax-l2-13b</a></li>
                
                <li><a href="mythomax-l2-13b_extended.html">mythomax-l2-13b_extended</a></li>
                
                <li><a href="mythomax-l2-13b_nitro.html">mythomax-l2-13b_nitro</a></li>
                
                <li><a href="mythomist-7b_free.html">mythomist-7b_free</a></li>
                
                <li><a href="neural-chat-7b.html">neural-chat-7b</a></li>
                
                <li><a href="noromaid-20b.html">noromaid-20b</a></li>
                
                <li><a href="noromaid-mixtral-8x7b-instruct.html">noromaid-mixtral-8x7b-instruct</a></li>
                
                <li><a href="nous-capybara-34b.html">nous-capybara-34b</a></li>
                
                <li><a href="nous-capybara-7b_free.html">nous-capybara-7b_free</a></li>
                
                <li><a href="nous-hermes-2-mistral-7b-dpo.html">nous-hermes-2-mistral-7b-dpo</a></li>
                
                <li><a href="nous-hermes-2-mixtral-8x7b-dpo.html">nous-hermes-2-mixtral-8x7b-dpo</a></li>
                
                <li><a href="nous-hermes-2-mixtral-8x7b-sft.html">nous-hermes-2-mixtral-8x7b-sft</a></li>
                
                <li><a href="nous-hermes-llama2-13b.html">nous-hermes-llama2-13b</a></li>
                
                <li><a href="nous-hermes-yi-34b.html">nous-hermes-yi-34b</a></li>
                
                <li><a href="openchat-7b_free.html">openchat-7b_free</a></li>
                
                <li><a href="openhermes-2-mistral-7b.html">openhermes-2-mistral-7b</a></li>
                
                <li><a href="openhermes-2.5-mistral-7b.html">openhermes-2.5-mistral-7b</a></li>
                
                <li><a href="palm-2-chat-bison.html">palm-2-chat-bison</a></li>
                
                <li><a href="palm-2-chat-bison-32k.html">palm-2-chat-bison-32k</a></li>
                
                <li><a href="palm-2-codechat-bison.html">palm-2-codechat-bison</a></li>
                
                <li><a href="palm-2-codechat-bison-32k.html">palm-2-codechat-bison-32k</a></li>
                
                <li><a href="phind-codellama-34b.html">phind-codellama-34b</a></li>
                
                <li><a href="pplx-70b-chat.html">pplx-70b-chat</a></li>
                
                <li><a href="pplx-70b-online.html">pplx-70b-online</a></li>
                
                <li><a href="pplx-7b-chat.html">pplx-7b-chat</a></li>
                
                <li><a href="pplx-7b-online.html">pplx-7b-online</a></li>
                
                <li><a href="psyfighter-13b.html">psyfighter-13b</a></li>
                
                <li><a href="psyfighter-13b-2.html">psyfighter-13b-2</a></li>
                
                <li><a href="remm-slerp-l2-13b_extended.html">remm-slerp-l2-13b_extended</a></li>
                
                <li><a href="rwkv-5-3b-ai-town.html">rwkv-5-3b-ai-town</a></li>
                
                <li><a href="rwkv-5-world-3b.html">rwkv-5-world-3b</a></li>
                
                <li><a href="sonar-medium-chat.html">sonar-medium-chat</a></li>
                
                <li><a href="sonar-medium-online.html">sonar-medium-online</a></li>
                
                <li><a href="sonar-small-chat.html">sonar-small-chat</a></li>
                
                <li><a href="sonar-small-online.html">sonar-small-online</a></li>
                
                <li><a href="stripedhyena-hessian-7b.html">stripedhyena-hessian-7b</a></li>
                
                <li><a href="stripedhyena-nous-7b.html">stripedhyena-nous-7b</a></li>
                
                <li><a href="synthia-70b.html">synthia-70b</a></li>
                
                <li><a href="toppy-m-7b_free.html">toppy-m-7b_free</a></li>
                
                <li><a href="weaver.html">weaver</a></li>
                
                <li><a href="xwin-lm-70b.html">xwin-lm-70b</a></li>
                
                <li><a href="yi-34b-chat.html">yi-34b-chat</a></li>
                
                <li><a href="yi-6b.html">yi-6b</a></li>
                
                <li><a href="zephyr-7b-beta.html">zephyr-7b-beta</a></li>
                
                <li><a href="zephyr-7b-beta_free.html">zephyr-7b-beta_free</a></li>
                
                <li><a href="zephyr-orpo-141b-a35b.html">zephyr-orpo-141b-a35b</a></li>
                
            </ul>
        </nav>
        <main>
            <h1>openrouter/perplexity/sonar-small-chat</h1>
            <p>Model: openrouter/perplexity/sonar-small-chat</p>

            
                <p>Content: <p>You can use the <code>marshmallow</code> library to create dataclasses for the given JSON. First, you need to import the required libraries:</p>
<pre><code class="language-python">import datetime
from dataclasses import dataclass
from marshmallow import fields, post_load, validates
from marshmallow.utils import when,NewStateInfo
</code></pre>
<p>Next, create the dataclass for the JSON:</p>
<pre><code class="language-python">@dataclass
class MyData:
    first_name: str
    last_name: str
    date_of_birth: datetime.date
    orders: list

    @post_load
    def construct(self, data, **kws):
        name = data['first_name']
        self.first_name = name

        self.last_name = data['last_name']

        self.date_of_birth = datetime.date.fromisoformat(data['date_of_birth'])

        self.orders = [data['orders'][0]]
</code></pre>
<p>Now, create the schema for the dataclass:</p>
<pre><code class="language-python">class Schema(ma.Schema):
    def isoformat(self, date):
        return date.isoformat()

    date_of_birth = fields.Str(attribute='first_name', allow_none=True)  # This field is incorrect, refer to answer from @Rick_Wells
    first_name = fields.Str(attribute='name')
    last_name = fields.Str(attribute='last_name')

    created = fields.Function(lambda d: d.isoformat())(attribute='orders[0].created', allow_none=True)
    amount = fields.Decimal(attribute='orders[0].amount')
    orders = fields.Nested(sec_ordenes, key='orders', many=True, skip_default=True)
</code></pre>
<p>Finally, deserialize the JSON using the schema:</p>
<pre><code class="language-python">json_text = &quot;&quot;&quot;
    {
      'first_name': 'Jane',
      'last_name': 'Smith',
      'date_of_birth': '03/16/1977',
      'orders': [
        {
          'created': '2024-01-25T15:00:04',
          'amount': '100.00'
        }
      ]
    }
&quot;&quot;&quot;

json_data = ma.load(json_text, MyData, context={**{Formulate: True}})
</code></pre>
<p>The <code>MyData</code> class is the dataclass for the JSON and handles the conversion of date_of_birth and created fields using the <code>post_load</code> decorator. The <code>Schema</code> class defines the schema for the JSON object and uses the Decimal and Function types to validate and serialize the value of each field. Finally, the <code>ma.load</code> function deserializes the JSON text, resulting in a <code>MyData</code> object.</p></p>
                <hr/>
            
                <p>Content: <p>To define dataclasses and use them with the Marshmallow library, you can follow these steps:</p>
<ol>
<li>Import the necessary modules and create the dataclass using the <code>@dataclass</code> decorator from the <code>dataclasses</code> module.</li>
<li>Create a private class for the JSON structure and use the <code>@dataclass</code> decorator again.</li>
<li>Define the fields as private properties and use the backwards-compatible <code>__init__</code> method.</li>
<li>Add an <strong>init</strong> method for initializing the fields.</li>
<li>Define the relations between the fields.</li>
<li>Create a schema class that inherits from Marshmallow's <code>Schema</code>.</li>
<li>Inside the schema class, define fields for each field in the JSON structure.</li>
<li>Create an <code>Order</code> class and add fields for <code>created</code> and <code>amount</code>.</li>
<li>Add the <code>orders</code> field to the schema.</li>
</ol>
<p>Here is an example implementation:</p>
<pre><code class="language-python">from dataclasses import dataclass
from datetime import datetime
from decimal import Decimal
from marshmallow import Schema, fields

@dataclass
class Person:
    first_name: str
    last_name: str
    date_of_birth: date
    orders: list

@dataclass
class OrderDataclass:
    created: datetime
    amount: Decimal

class JsonStructure(Person):
    __init_subclass__ = False

class JsonSchema(Schema):
    first_name = fields.String()
    last_name = fields.String()
    date_of_birth = fields.String()
    orders = fields.List(fields.Nested(OrderSchema))

    class OrderSchema(fields.Nested):
        created = fields.DateTime()
        amount = fields.Decimal()

json_structure = JsonStructure()
</code></pre>
<p>Now you can use the <code>json_structure</code> object to serialize and deserialize JSON data using the Marshmallow schema.</p></p>
                <hr/>
            
                <p>Content: <p>You can achieve this by using the marshmallow library in Python.</p>
<p>First, you need to import the necessary modules and establish a schema.</p>
<pre><code class="language-python">from datetime import date, datetime
from decimal import Decimal
from pydantic import BaseModel
from typing import List
from marshmallow_enum import EnumValue
from marshmallow import fields, Schema, post_load
</code></pre>
<p>Next, you will define the data classes. In this case, the <code>User</code> schema represents a JSON structure containing the user's first name, last name, date_of_birth, and a list of orders. Each order is represented by a corresponding <code>Order</code> schema.</p>
<pre><code class="language-python">class DateValue(EnumValue):
    pass

class DateFields(fields.Field):
    class Option:
        default = DateValue(datetime(1977, 3, 16))

    def _serialize(self, value, **kwargs):
        return str(value)

class Order(BaseModel):
    created: datetime
    amount: Decimal

class User(BaseModel):
    first_name: str
    last_name: str
    date_of_birth: date
    orders: List[Order]

    def __init__(self, first_name: str, last_name: str, date_of_birth: date, orders: List[Order], **kwargs):
        super().__init__(**kwargs)
        self.first_name = first_name
        self.last_name = last_name
        self.date_of_birth = date_of_birth
        self.orders = orders
</code></pre>
<p>To parse the JSON data, you can use the <code>load</code> method. This will return an instance of <code>User</code>.</p>
<pre><code class="language-python"># Your JSON data here
data = ...

parsed_json = User.load(data).json()  # Output: {'first_name': 'Jane', 'last_name': 'Smith', 'date_of_birth': '1977-03-16', 'orders': [{'created': '2024-01-25 15:00:04', 'amount': '100.00'}]}
</code></pre>
<p>For more in-depth marshmallow examples, please refer to the <a href="https://docs.marshmallow-code.readthedocs.io/en/latest/">documentation</a>.</p></p>
                <hr/>
            
        </main>
    </body>
</html>